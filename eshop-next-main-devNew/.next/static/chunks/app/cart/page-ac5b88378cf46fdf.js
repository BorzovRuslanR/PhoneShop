(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{7590:function(e,t,r){Promise.resolve().then(r.bind(r,4602))},439:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var a=r(6899),s=r(660),n=r(4657),o=r(2826),i=r(3352);let d=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",submit:"focus:outline-none text-green-400 bg-white hover:text-white hover:bg-green-400 border border-green-400 hover:border-green-400 rounded-lg font-medium py-2.5 px-4"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-11 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:c=!1,...u}=e,l=c?n.g7:"button";return(0,a.jsx)(l,{className:(0,i.cn)(d({variant:s,size:o,className:r})),ref:t,...u})});c.displayName="Button"},3976:function(e,t,r){"use strict";r.d(t,{FN:function(){return f},Mi:function(){return h},VW:function(){return c},_i:function(){return u},gD:function(){return p},lj:function(){return g},sA:function(){return m}});var a=r(6899),s=r(660),n=r(2648),o=r(2826),i=r(2281),d=r(3352);let c=n.zt,u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.l_,{ref:t,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...s})});u.displayName=n.l_.displayName;let l=(0,o.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=s.forwardRef((e,t)=>{let{className:r,variant:s,...o}=e;return(0,a.jsx)(n.fC,{ref:t,className:(0,d.cn)(l({variant:s}),r),...o})});f.displayName=n.fC.displayName;let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.aU,{ref:t,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...s})});p.displayName=n.aU.displayName;let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.x8,{ref:t,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...s,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});m.displayName=n.x8.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,d.cn)("text-sm font-semibold",r),...s})});h.displayName=n.Dx.displayName;let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,d.cn)("text-sm opacity-90",r),...s})});g.displayName=n.dk.displayName},2099:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var a=r(660);let s=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function u(e){c=i(c,e),d.forEach(e=>{e(c)})}function l(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(c);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:l,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},4602:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var a=r(6899),s=r(439),n=r(2563),o=r(4933),i=r(6037),d=r(8181);r(660);var c=r(273);let u=c.z.object({cart:c.z.array(c.z.object({id:c.z.number(),createdAt:c.z.string(),updatedAt:c.z.string(),userId:c.z.string(),ProductCart:c.z.array(c.z.object({id:c.z.number(),productId:c.z.number(),cartId:c.z.number(),quantity:c.z.number(),Product:c.z.object({id:c.z.number(),name:c.z.string(),price:c.z.number(),desc:c.z.string(),img:c.z.string(),createdAt:c.z.string(),updatedAt:c.z.string()})}))}))});var l=r(2099),f=r(3976);function p(){let e=(0,n.NL)(),{toast:t}=(0,l.pm)(),{data:r,isLoading:c,isError:p}=(0,o.a)({queryKey:["cart"],queryFn:()=>fetch("/api/cart").then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(e=>u.parse(e)).catch(e=>{t({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request.",action:(0,a.jsx)(f.gD,{altText:"Try again",children:"Try again"})})})}),m=async()=>{try{let r=await fetch("/api/cartDeleteFull",{method:"DELETE"});if(!r.ok)throw Error("Failed to delete cart");await r.json(),e.invalidateQueries({queryKey:["cart"]}),t({title:"Success",description:"Cart cleared"})}catch(e){console.error(e)}};if(c)return(0,a.jsx)("div",{children:"Loading..."});if(p)return t({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request.",action:(0,a.jsx)(f.gD,{altText:"Try again",children:"Try again"})});if(!r)return(0,a.jsx)("div",{children:"Load error"});let h=r.cart.length,g=0;r.cart.forEach(e=>{e.ProductCart.forEach(e=>{g+=e.quantity})});let x=0;if(r.cart.forEach(e=>{e.ProductCart.forEach(e=>{let{price:t}=e.Product,r=e.quantity;x+=t*r})}),c)return(0,a.jsx)("div",{children:"Loading..."});if(p)return(0,a.jsx)("div",{children:"Error"});if(!r)return(0,a.jsx)("div",{children:"Load error"});let v=r.cart.map(e=>({productId:e.ProductCart[0].productId,productName:e.ProductCart[0].Product.name,productDesc:e.ProductCart[0].Product.desc,productPrice:e.ProductCart[0].Product.price,quantity:e.ProductCart[0].quantity,productImg:e.ProductCart[0].Product.img}));return(0,a.jsxs)("div",{className:"container mx-auto py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Cart"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("p",{className:"font-bold text-gray-600 text-2xl m-2",children:["Total quantity: ",(0,a.jsx)("span",{className:"font-bold",children:g})]}),(0,a.jsxs)("p",{className:"font-bold text-gray-600 text-2xl m-2",children:["Total items: ",(0,a.jsx)("span",{className:"font-bold",children:h})]}),(0,a.jsx)(s.z,{size:"default",variant:"destructive",onClick:m,children:"Clear cart"})]})]}),(0,a.jsx)("ul",{className:"flex flex-col gap-4",children:v.map(r=>(0,a.jsxs)("li",{className:"bg-white p-4 shadow rounded-lg flex items-center",children:[(0,a.jsx)("div",{className:"mr-4",children:(0,a.jsx)(d.default,{src:r.productImg,alt:r.productName,width:400,height:600,className:"w-32 h-32 object-cover"})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:r.productName}),(0,a.jsx)("p",{className:"text-gray-500",children:r.productDesc})]}),(0,a.jsxs)("p",{className:"text-gray-500 p-4",children:["$",r.productPrice]}),(0,a.jsx)("p",{className:"text-gray-500 p-4",children:r.quantity}),(0,a.jsx)(s.z,{size:"icon",variant:"destructive",onClick:()=>{fetch("/api/cart",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:r.productId})}).then(r=>{if(!r.ok)throw Error("Network response was not ok");e.invalidateQueries({queryKey:["cart"]}),t({title:"Success",description:"Item removed from cart"})})},children:(0,a.jsx)(i.Z,{})})]},r.productId))}),(0,a.jsxs)("div",{className:"flex justify-end mt-4 items-center",children:[(0,a.jsxs)("span",{className:"font-bold text-gray-600 text-2xl mr-2",children:["Total: ",(0,a.jsxs)("span",{className:"font-bold",children:[x," $"]})]}),(0,a.jsx)(s.z,{size:"lg",variant:"submit",children:"Заказать"})]})]})}},3352:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(9823),s=r(2108);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[757,333,205,408,672,259,744],function(){return e(e.s=7590)}),_N_E=e.O()}]);